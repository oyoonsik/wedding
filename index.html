<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>윤식♥혜미 결혼합니다.</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@300;400&display=swap" rel="stylesheet">
    <link href="./css/style.css" rel="stylesheet">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
</head>
<body>

<div id="intro" class="intro-section">
    <div class="intro-img-frame">
        <img src="./img/pc002232775.jpg" alt="Intro Photo">
        <div class="intro-text">
            <h1 class="main-title">LOVE OF<br>LIFE —</h1>
            <div class="sub-text-wrap">
                <span>WEDDING</span>
                <span>INVITATION</span>
            </div>
        </div>
    </div>
</div>

<div id="wrap">

    <audio id="bgm" loop>
        <source src="./music/wedding-bgm.mp3" type="audio/mpeg">
    </audio>

    <div id="music-control" class="music-btn">
        <span class="icon-music">♪</span>
        <div class="music-bar-wrap">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
    </div>

    <section class="main_visual">
        <p class="wedding_date reveal">2026. 10. 10</p>
        <h1 class="wedding_names reveal">Oh Yoonsik & Park Hyemi</h1>
        <div class="img_frame reveal">
            <img src="https://images.unsplash.com/photo-1519741497674-611481863552?q=80&w=1000" alt="Main Photo">
        </div>
        <p class="location reveal">서울 L65호텔웨딩컨벤션</p>
    </section>

    <section class="greeting reveal">
        <h2>INVITATION</h2>
        <div class="greeting_text">
            곁에 있을 때 가장 나다워지는<br>
            사람을 만났습니다.<br><br>
            서로가 마주 보며 다져온 약속을<br>
            이제는 함께 걸어가며 지키려 합니다.<br><br>
            함께 축복해 주시면 감사하겠습니다.
        </div>
    </section>

    <section class="gallery reveal">
        <h2>GALLERY</h2>
        <div class="box_dummy"></div>
        <div class="box_dummy"></div>
    </section>
</div>

<script>
gsap.registerPlugin(ScrollTrigger);

window.onload = () => {
    // 1. 전체 타임라인 생성 (인트로 -> 메인 비주얼 연결)
    const masterTl = gsap.timeline();

    // [Step 1] 인트로 애니메이션
    masterTl
        .from(".intro-text", {
            opacity: 0,
            y: 30,
            duration: 1.5,
            ease: "power3.out"
        })
        .to("#intro", {
            delay: 1,
            duration: 1.5,
            yPercent: -100, // 인트로가 위로 슬라이드
            ease: "power4.inOut"
        })
        // [Step 2] 메인 비주얼 (#wrap) 등장 (인트로가 거의 끝날 때쯤 시작)
        .from("#wrap", {
            opacity: 0,
            y: 50,
            duration: 1.2,
            clearProps: "all" 
        }, "-=0.8")
        // [Step 3] 메인 내부 요소들 순차적 등장
        .to(".wedding_date", { opacity: 1, y: -10, duration: 1 }, "-=0.4")
        .to(".wedding_names", { opacity: 1, y: -10, duration: 1 }, "-=0.7")
        .to(".img_frame", { opacity: 1, y: -10, duration: 1.2 }, "-=0.7")
        .to(".location", { opacity: 1, duration: 1 }, "-=0.6");

    // 2. 스크롤 트리거 (인사말, 갤러리 등 하단 섹션)
    // 인트로 이후에 나오는 요소들만 대상으로 합니다.
    const revealEls = document.querySelectorAll('.reveal:not(.main_visual .reveal)');
    
    revealEls.forEach((el) => {
        gsap.to(el, {
            scrollTrigger: {
                trigger: el,
                start: "top 85%",
                toggleActions: "play none none none"
                // once: true, // 한 번만 실행되게 하려면 추가
            },
            opacity: 1,
            y: -20,
            duration: 1.5,
            ease: "power2.out"
        });
    });

    // (옵션) 인트로 진행 중에는 스크롤을 막고 싶다면?
    // masterTl이 끝나기 전까지 body의 overflow를 숨겼다가 완료 후 푸는 로직을 추가할 수 있습니다.
};
</script>

<script>
    const bgm = document.getElementById('bgm');
const musicBtn = document.getElementById('music-control');

musicBtn.addEventListener('click', () => {
    if (bgm.paused) {
        bgm.play();
        musicBtn.classList.add('playing');
    } else {
        bgm.pause();
        musicBtn.classList.remove('playing');
    }
});

// 자동 재생 시도 (브라우저 차단 대비)
window.addEventListener('click', () => {
    // 사용자가 화면 어디든 처음 클릭할 때 음악 시작 (원치 않으면 삭제)
    if (bgm.paused && !musicBtn.classList.contains('manually-paused')) {
        bgm.play();
        musicBtn.classList.add('playing');
    }
}, { once: true });
</script>

</body>
</html>